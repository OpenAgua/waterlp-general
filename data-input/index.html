<!DOCTYPE html>
<html lang="en">
<head>
  
  
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    
    
    <link rel="shortcut icon" href="../img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
    <title>Data input - WaterLP</title>
    <link href="../css/bootstrap-3.3.7.min.css" rel="stylesheet">
    <link href="../css/font-awesome-4.7.0.css" rel="stylesheet">
    <link href="../css/base.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/highlight.css">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <script src="../js/jquery-3.2.1.min.js"></script>
    <script src="../js/bootstrap-3.3.7.min.js"></script>
    <script src="../js/highlight.pack.js"></script>
    
    <base target="_top">
    <script>
      var base_url = '..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "Data input with OpenAgua", url: "#_top", children: [
              {title: "General concepts", url: "#general-concepts" },
          ]},
        ];

    </script>
    <script src="../js/base.js"></script> 
</head>

<body>
<script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script>



<div class="container-fluid wm-page-content">
  <a name="_top"></a>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="glossary/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="glossary/" class="btn btn-xs btn-link">
        Glossary
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="allocation-logic/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="allocation-logic/" class="btn btn-xs btn-link">
        Allocation logic
      </a>
    </div>
    
  </div>

    

    <h1 id="data-input-with-openagua">Data input with OpenAgua<a class="headerlink" href="#data-input-with-openagua" title="Permanent link">&para;</a></h1>
<p>This model is designed to integrate with <a href="https://www.openagua.org">OpenAgua</a>. General concepts related to entering data are described. Documentation about the specific syntax and functions is forthcoming.</p>
<h2 id="general-concepts">General concepts<a class="headerlink" href="#general-concepts" title="Permanent link">&para;</a></h2>
<p>This code is evaluated using the evaluate function found in evaluator.py. Essentially, a string representation of a function is created, with the entered code as the body of the function. All lines are indented appropriately as needed for Python. The function is then called by the evaluator and assigned to a variable. The function is run once per time step.</p>
<p>The last line of the user-entered code is automatically prepended with "return ", such that the user doesn't need to. This is most useful for simple cases, such as a constant value:</p>
<p>However, the evaluator also automatically detects the presence of a "return " in the last line, such that the user may also include a return as desired. So <code>return x</code> on the last line is the same as <code>x</code>. In many cases, including <code>return</code> is simply a matter of personal preference. But this is particularly useful if a return is nested in the last part of a conditional statement. To demonstrate, the following three versions of code input yield the exact same result when evaluated:</p>
<pre><code class="text">if date.month in [6,7,8]:
    x = 0.5
else:
    x = 1
x
</code></pre>

<pre><code class="text">if date.month in [6,7,8]:
    x = 0.5
else:
    x = 1
return x
</code></pre>

<pre><code class="python">if date.month in [6,7,8]:
    return 0.5
else:
    return 1
</code></pre>

<p>This scheme enables the user to import, enter custom functions directly into the code, etc. In the future, this will also enable offering a range of custom Python functions (Check <strong>Writing Functions</strong>). It will also allow the user to create, store, re-use, and share custom functions.</p>
<p>The last three examples above should raise a question: where does "date" come from? OpenAgua will include several built-in variables available for use. For now, this only includes the date of the function call. In the future, however, this will expand to include others as needed.</p>

  <br>
    

  <div class="row wm-article-nav-buttons" role="navigation" aria-label="navigation">
    
    <div class="wm-article-nav pull-right">
      <a href="glossary/" class="btn btn-xs btn-default pull-right">
        Next
        <i class="fa fa-chevron-right" aria-hidden="true"></i>
      </a>
      <a href="glossary/" class="btn btn-xs btn-link">
        Glossary
      </a>
    </div>
    
    <div class="wm-article-nav">
      <a href="allocation-logic/" class="btn btn-xs btn-default pull-left">
        <i class="fa fa-chevron-left" aria-hidden="true"></i>
        Previous</a><a href="allocation-logic/" class="btn btn-xs btn-link">
        Allocation logic
      </a>
    </div>
    
  </div>

    <br>
</div>

<footer class="col-md-12 wm-page-content">
  <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer>

</body>
</html>